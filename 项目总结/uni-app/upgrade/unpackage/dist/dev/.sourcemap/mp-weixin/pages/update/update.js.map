{"version":3,"sources":["webpack:///E:/test/upgrade/main.js","webpack:///E:/test/upgrade/pages/update/update.vue?4659","webpack:///E:/test/upgrade/pages/update/update.vue?b8d4","webpack:///E:/test/upgrade/pages/update/update.vue?9477","webpack:///E:/test/upgrade/pages/update/update.vue?a028","webpack:///./node_modules/@dcloudio/uni-mp-weixin/dist/index.js","webpack:///E:/test/upgrade/pages/update/update.vue","webpack:///E:/test/upgrade/pages/update/update.vue?2ee7","webpack:///E:/test/upgrade/pages/update/update.vue?1172"],"names":["Page","App","data","platform","uni","getSystemInfoSync","current_version","text","upgrade","downPath","configData","AppupdateUrl","$updateurl","onLoad","methods","versionChecked","currentV","oldV","split","newV","i","length","item","item2","getConfigDownPath","pobj","key","JSON","stringify","newDownObj","pathsLeng","randomIndex","parseInt","Math","random","path","splice","getWidgetInfo","Promise","resolve","plus","runtime","getProperty","appid","wgtinfo","version","detectUpgrade","dtask1","downloader","createDownload","retryInterval","timeout","status","clear","io","resolveLocalFileSystemURL","filename","entry","file","fileReader","FileReader","readAsText","onload","results","parse","result","console","log","reLaunch","url","navigator","closeSplashscreen","iphoneData","min_hotupdate_ver","Appupdate","openURL","onerror","showModal","title","content","showCancel","success","res","quit","start","config","dtask","d","convertLocalFileSystemURL","os","name","fs","size","install","storage","setItem","remove","restart","e","showToast","icon","image","clearInterval","stop","confirm","addEventListener","task","state","Size","downloadedSize","totalSize"],"mappings":";;;;;;;;;;AAAA;AACA;AACI,+I;AACAA,IAAI,CAAC,+BAAYC,eAAZ,CAAD,CAAJ,C;;;;;;;;;;;;ACHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqF;AAC3B;AACL;AACc;;;AAGnE;AAC2I;AAC3I,gBAAgB,sJAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAA0qB,CAAgB,srBAAG,EAAC,C;;;;;;;;;;;;ACA9rB;AAAA;AAAA;AAAA;AAAy4B,CAAgB,y3BAAG,EAAC,C;;;;;;;;;;;;ACA75B;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,0BAA0B;;AAE7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,2DAA2D,kBAAkB;AAC7E,gCAAgC;AAChC,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,gCAAgC,WAAW,MAAM,IAAI;AACrD,SAAS,6BAA6B;AACtC;AACA,SAAS,qCAAqC,KAAK,yBAAyB;AAC5E;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA,qDAAqD;AACrD;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,mCAAmC,WAAW;AAC9C;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,iBAAiB,KAAK,aAAa,KAAK;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;AAID;;AAEA,CAAC;;AAED;;AAEA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEe,oEAAK,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpSN;AACdC,MADc,kBACP;AACN,WAAO;AACNC,cAAQ,EAAEC,GAAG,CAACC,iBAAJ,GAAwBF,QAD5B;AAENG,qBAAe,EAAE,GAFX;AAGNC,UAAI,EAAE,YAHA;AAINC,aAAO,EAAE,CAJH;AAKNC,cAAQ,EAAE,EALJ;AAMNC,gBAAU,EAAE,EAN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","file":"pages/update/update.js","sourcesContent":["import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/update/update.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=a821ca3c&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\nimport style0 from \"./update.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('a821ca3c', component.options)\n    } else {\n      api.reload('a821ca3c', component.options)\n    }\n    module.hot.accept(\"./update.vue?vue&type=template&id=a821ca3c&\", function () {\n      api.rerender('a821ca3c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"test/upgrade/pages/update/update.vue\"\nexport default component.exports","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=template&id=a821ca3c&\"","const _toString = Object.prototype.toString;\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\n\r\nfunction isFn (fn) {\r\n  return typeof fn === 'function'\r\n}\r\n\r\nfunction isStr (str) {\r\n  return typeof str === 'string'\r\n}\r\n\r\nfunction isPlainObject (obj) {\r\n  return _toString.call(obj) === '[object Object]'\r\n}\r\n\r\nfunction hasOwn (obj, key) {\r\n  return hasOwnProperty.call(obj, key)\r\n}\n\nconst SYNC_API_RE = /hideKeyboard|upx2px|canIUse|^create|Sync$|Manager$/;\r\n\r\nconst CONTEXT_API_RE = /^create|Manager$/;\r\n\r\nconst CALLBACK_API_RE = /^on/;\r\n\r\nfunction isContextApi (name) {\r\n  return CONTEXT_API_RE.test(name)\r\n}\r\nfunction isSyncApi (name) {\r\n  return SYNC_API_RE.test(name)\r\n}\r\n\r\nfunction isCallbackApi (name) {\r\n  return CALLBACK_API_RE.test(name)\r\n}\r\n\r\nfunction handlePromise (promise) {\r\n  return promise.then(data => {\r\n    return [null, data]\r\n  })\r\n    .catch(err => [err])\r\n}\r\n\r\nfunction shouldPromise (name) {\r\n  if (isSyncApi(name)) {\r\n    return false\r\n  }\r\n  if (isCallbackApi(name)) {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nfunction promisify (name, api) {\r\n  if (!shouldPromise(name)) {\r\n    return api\r\n  }\r\n  return function promiseApi (options = {}, ...params) {\r\n    if (isFn(options.success) || isFn(options.fail) || isFn(options.complete)) {\r\n      return api(options, ...params)\r\n    }\r\n    return handlePromise(new Promise((resolve, reject) => {\r\n      api(Object.assign({}, options, {\r\n        success: resolve,\r\n        fail: reject\r\n      }), ...params);\r\n      /* eslint-disable no-extend-native */\r\n      Promise.prototype.finally = function (callback) {\r\n        const promise = this.constructor;\r\n        return this.then(\r\n          value => promise.resolve(callback()).then(() => value),\r\n          reason => promise.resolve(callback()).then(() => {\r\n            throw reason\r\n          })\r\n        )\r\n      };\r\n    }))\r\n  }\r\n}\n\nconst EPS = 1e-4;\r\nconst BASE_DEVICE_WIDTH = 750;\r\nlet isIOS = false;\r\nlet deviceWidth = 0;\r\nlet deviceDPR = 0;\r\n\r\nfunction checkDeviceWidth () {\r\n  const {\r\n    platform,\r\n    pixelRatio,\r\n    windowWidth\r\n  } = wx.getSystemInfoSync(); // uni=>wx runtime 编译目标是 uni 对象，内部不允许直接使用 uni\r\n\r\n  deviceWidth = windowWidth;\r\n  deviceDPR = pixelRatio;\r\n  isIOS = platform === 'ios';\r\n}\r\n\r\nfunction upx2px (number, newDeviceWidth) {\r\n  if (deviceWidth === 0) {\r\n    checkDeviceWidth();\r\n  }\r\n\r\n  number = Number(number);\r\n  if (number === 0) {\r\n    return 0\r\n  }\r\n  let result = (number / BASE_DEVICE_WIDTH) * (newDeviceWidth || deviceWidth);\n  if (result < 0) {\n    result = -result;\n  }\n  result = Math.floor(result + EPS);\n  if (result === 0) {\n    if (deviceDPR === 1 || !isIOS) {\n      return 1\n    } else {\n      return 0.5\n    }\n  }\n  return number < 0 ? -result : result\r\n}\n\nvar protocols = {};\n\nconst CALLBACKS = ['success', 'fail', 'cancel', 'complete'];\r\n\r\nfunction processCallback (methodName, method, returnValue) {\r\n  return function (res) {\r\n    return method(processReturnValue(methodName, res, returnValue))\r\n  }\r\n}\r\n\r\nfunction processArgs (methodName, fromArgs, argsOption = {}, returnValue = {}, keepFromArgs = false) {\r\n  if (isPlainObject(fromArgs)) { // 一般 api 的参数解析\r\n    const toArgs = keepFromArgs === true ? fromArgs : {}; // returnValue 为 false 时，说明是格式化返回值，直接在返回值对象上修改赋值\r\n    if (isFn(argsOption)) {\r\n      argsOption = argsOption(fromArgs, toArgs) || {};\r\n    }\r\n    for (let key in fromArgs) {\r\n      if (hasOwn(argsOption, key)) {\r\n        let keyOption = argsOption[key];\r\n        if (isFn(keyOption)) {\r\n          keyOption = keyOption(fromArgs[key], fromArgs, toArgs);\r\n        }\r\n        if (!keyOption) { // 不支持的参数\r\n          console.warn(`微信小程序 ${methodName}暂不支持${key}`);\r\n        } else if (isStr(keyOption)) { // 重写参数 key\r\n          toArgs[keyOption] = fromArgs[key];\r\n        } else if (isPlainObject(keyOption)) { // {name:newName,value:value}可重新指定参数 key:value\r\n          toArgs[keyOption.name ? keyOption.name : key] = keyOption.value;\r\n        }\r\n      } else if (CALLBACKS.includes(key)) {\r\n        toArgs[key] = processCallback(methodName, fromArgs[key], returnValue);\r\n      } else {\r\n        if (!keepFromArgs) {\r\n          toArgs[key] = fromArgs[key];\r\n        }\r\n      }\r\n    }\r\n    return toArgs\r\n  } else if (isFn(fromArgs)) {\r\n    fromArgs = processCallback(methodName, fromArgs, returnValue);\r\n  }\r\n  return fromArgs\r\n}\r\n\r\nfunction processReturnValue (methodName, res, returnValue, keepReturnValue = false) {\r\n  if (isFn(protocols.returnValue)) { // 处理通用 returnValue\r\n    res = protocols.returnValue(methodName, res);\r\n  }\r\n  return processArgs(methodName, res, returnValue, {}, keepReturnValue)\r\n}\r\n\r\nfunction wrapper (methodName, method) {\r\n  if (hasOwn(protocols, methodName)) {\r\n    const protocol = protocols[methodName];\r\n    if (!protocol) { // 暂不支持的 api\r\n      return function () {\r\n        console.error(`微信小程序 暂不支持${methodName}`);\r\n      }\r\n    }\r\n    return function (arg1, arg2) { // 目前 api 最多两个参数\r\n      let options = protocol;\r\n      if (isFn(protocol)) {\r\n        options = protocol(arg1);\r\n      }\r\n\r\n      arg1 = processArgs(methodName, arg1, options.args, options.returnValue);\r\n\r\n      const returnValue = wx[options.name || methodName](arg1, arg2);\r\n      if (isSyncApi(methodName)) { // 同步 api\r\n        return processReturnValue(methodName, returnValue, options.returnValue, isContextApi(methodName))\r\n      }\r\n      return returnValue\r\n    }\r\n  }\r\n  return method\r\n}\n\nconst todoApis = Object.create(null);\r\n\r\nconst TODOS = [\r\n  'subscribePush',\r\n  'unsubscribePush',\r\n  'onPush',\r\n  'offPush',\r\n  'share'\r\n];\r\n\r\nfunction createTodoApi (name) {\r\n  return function todoApi ({\r\n    fail,\r\n    complete\r\n  }) {\r\n    const res = {\r\n      errMsg: `${name}:fail:暂不支持 ${name} 方法`\r\n    };\r\n    isFn(fail) && fail(res);\r\n    isFn(complete) && complete(res);\r\n  }\r\n}\r\n\r\nTODOS.forEach(function (name) {\r\n  todoApis[name] = createTodoApi(name);\r\n});\n\nvar providers = {\r\n  oauth: ['weixin'],\r\n  share: ['weixin'],\r\n  payment: ['wxpay'],\r\n  push: ['weixin']\r\n};\n\nfunction getProvider ({\r\n  service,\r\n  success,\r\n  fail,\r\n  complete\r\n}) {\r\n  let res = false;\r\n  if (providers[service]) {\r\n    res = {\r\n      errMsg: 'getProvider:ok',\r\n      service,\r\n      provider: providers[service]\r\n    };\r\n    isFn(success) && success(res);\r\n  } else {\r\n    res = {\r\n      errMsg: 'getProvider:fail:服务[' + service + ']不存在'\r\n    };\r\n    isFn(fail) && fail(res);\r\n  }\r\n  isFn(complete) && complete(res);\r\n}\n\nvar extraApi = /*#__PURE__*/Object.freeze({\n  getProvider: getProvider\n});\n\n\n\nvar api = /*#__PURE__*/Object.freeze({\n\n});\n\nlet uni = {};\r\n\r\nif (typeof Proxy !== 'undefined') {\r\n  uni = new Proxy({}, {\r\n    get (target, name) {\r\n      if (name === 'upx2px') {\r\n        return upx2px\r\n      }\r\n      if (api[name]) {\r\n        return promisify(name, api[name])\r\n      }\r\n      if (extraApi[name]) {\r\n        return promisify(name, extraApi[name])\r\n      }\r\n      if (todoApis[name]) {\r\n        return promisify(name, todoApis[name])\r\n      }\r\n      if (!hasOwn(wx, name) && !hasOwn(protocols, name)) {\r\n        return\r\n      }\r\n      return promisify(name, wrapper(name, wx[name]))\r\n    }\r\n  });\r\n} else {\r\n  uni.upx2px = upx2px;\r\n\r\n  Object.keys(todoApis).forEach(name => {\r\n    uni[name] = promisify(name, todoApis[name]);\r\n  });\r\n\r\n  Object.keys(extraApi).forEach(name => {\r\n    uni[name] = promisify(name, todoApis[name]);\r\n  });\r\n\r\n  Object.keys(api).forEach(name => {\r\n    uni[name] = promisify(name, api[name]);\r\n  });\r\n\r\n  Object.keys(wx).forEach(name => {\r\n    if (hasOwn(wx, name) || hasOwn(protocols, name)) {\r\n      uni[name] = promisify(name, wrapper(name, wx[name]));\r\n    }\r\n  });\r\n}\r\n\r\nvar uni$1 = uni;\n\nexport default uni$1;\n","\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tplatform: uni.getSystemInfoSync().platform,\r\n\t\t\tcurrent_version: 100,\r\n\t\t\ttext: '正在更新资源，请稍等',\r\n\t\t\tupgrade: 0,\r\n\t\t\tdownPath: [],\r\n\t\t\tconfigData: {},\r\n\t\t\tAppupdateUrl: this.$updateurl\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\tmethods: {\r\n\t\tversionChecked(currentV) {\r\n\t\t\tlet oldV = this.current_version.split('.');\r\n\t\t\tlet newV = currentV.split('.');\r\n\t\t\tfor (let i = 0; i < oldV.length; i++) {\r\n\t\t\t\tlet item = +oldV[i];\r\n\t\t\t\tlet item2 = +newV[i];\r\n\t\t\t\tif (item != item2) {\r\n\t\t\t\t\tif (item > item2) {\r\n\t\t\t\t\t\t//旧版大于新版 直接返回false\r\n\t\t\t\t\t\treturn false; //不需要升级\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false; //不需要升级\r\n\t\t},\r\n\t\t/**\r\n\t\t * 首先获取下载地址,之前的下载地址为字符串系列。\r\n\t\t *传入一个父对象、一个key  返回随机一个下载地址\r\n\t\t */\r\n\t\tgetConfigDownPath(pobj, key) {\r\n\t\t\tJSON.stringify(pobj);\r\n\t\t\tlet newDownObj = pobj[`new_${key}`];\r\n\t\t\tif (typeof newDownObj != 'undefined') {\r\n\t\t\t\t//先判断当前json文件中是否包含新版的升级下载地址,如果包含优先使用新版的\r\n\t\t\t\t//新版的下载地址必须是一个数组格式\r\n\t\t\t\tlet pathsLeng = newDownObj.length;\r\n\t\t\t\tlet randomIndex = parseInt(Math.random() * pathsLeng);\r\n\t\t\t\tlet path = newDownObj[randomIndex];\r\n\t\t\t\tif (key == 'download') {\r\n\t\t\t\t\t//热更key,新版使用\r\n\t\t\t\t\tthis.downPath = newDownObj;\r\n\t\t\t\t\tthis.downPath.splice(randomIndex, 1);\r\n\t\t\t\t}\r\n\t\t\t\treturn path;\r\n\t\t\t}\r\n\t\t\t//没有新版下载地址，直接读取传过来的key value\r\n\t\t\treturn pobj[key];\r\n\t\t},\r\n\t\tgetWidgetInfo() {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tplus.runtime.getProperty(plus.runtime.appid, wgtinfo => {\r\n\t\t\t\t\tresolve(wgtinfo.version);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tdetectUpgrade() {\r\n\t\t\tlet dtask1 = plus.downloader.createDownload(\r\n\t\t\t\tthis.AppupdateUrl,\r\n\t\t\t\t{\r\n\t\t\t\t\tretryInterval: 3,\r\n\t\t\t\t\ttimeout: 10\r\n\t\t\t\t},\r\n\t\t\t\t(data, status) => {\r\n\t\t\t\t\tplus.downloader.clear();\r\n\t\t\t\t\tif (status === 200) {\r\n\t\t\t\t\t\tplus.io.resolveLocalFileSystemURL(data.filename, entry => {\r\n\t\t\t\t\t\t\tentry.file(file => {\r\n\t\t\t\t\t\t\t\tlet fileReader = new plus.io.FileReader();\r\n\t\t\t\t\t\t\t\tfileReader.readAsText(file, 'utf-8');\r\n\t\t\t\t\t\t\t\tfileReader.onload = ()=> {\r\n\t\t\t\t\t\t\t\t\tlet results = JSON.parse(fileReader.result);\r\n\t\t\t\t\t\t\t\t\tif (!this.versionChecked(results.version)) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('不需要升级');\r\n\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tplus.navigator.closeSplashscreen();\r\n\t\t\t\t\t\t\t\t\t\t//需要升级\r\n\t\t\t\t\t\t\t\t\t\tlet iphoneData = '';\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (this.platform == 'android') {\r\n\t\t\t\t\t\t\t\t\t\t\t//安卓手机\r\n\t\t\t\t\t\t\t\t\t\t\tiphoneData = results['android'];\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tiphoneData = results['iphone'];\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (!this.versionChecked(iphoneData.min_hotupdate_ver)) {\r\n\t\t\t\t\t\t\t\t\t\t\t//热更\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('热更');\r\n\t\t\t\t\t\t\t\t\t\t\tthis.configData = JSON.parse(JSON.stringify(results));\r\n\t\t\t\t\t\t\t\t\t\t\tthis.Appupdate(this.configData);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('打开链接下载');\r\n\t\t\t\t\t\t\t\t\t\t\tlet downPath = this.getConfigDownPath(\r\n\t\t\t\t\t\t\t\t\t\t\t\tiphoneData,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'install'\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tplus.runtime.openURL(downPath);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tfileReader.onerror = () => {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\tcontent: '配置文件打开失败',\r\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\tplus.runtime.quit();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '配置文件下载失败',\r\n\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tplus.runtime.quit();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tdtask1.start();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 热更升级\r\n\t\t */\r\n\t\tAppupdate(config) {\r\n\t\t\tlet downPath = this.getConfigDownPath(config, 'download');\r\n\t\t\tlet dtask = plus.downloader.createDownload(\r\n\t\t\t\tdownPath,\r\n\t\t\t\t{\r\n\t\t\t\t\tretryInterval: 3,\r\n\t\t\t\t\ttimeout: 10\r\n\t\t\t\t},\r\n\t\t\t\t(d, status) => {\r\n\t\t\t\t\tthis.upgrade=100;\r\n\t\t\t\t\tif (status == 200) {\r\n\t\t\t\t\t\tthis.text = '正在校验安装包是否完整';\r\n\t\t\t\t\t\tvar path = plus.io.convertLocalFileSystemURL(d.filename);\r\n\t\t\t\t\t\tif (plus.os.name == 'iOS') {\r\n\t\t\t\t\t\t\tpath = 'file://' + path;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tplus.io.resolveLocalFileSystemURL(\r\n\t\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\t\tentry => {\r\n\t\t\t\t\t\t\t\tentry.file(fs => {\r\n\t\t\t\t\t\t\t\t\tif (fs.size == config.size) {\r\n\t\t\t\t\t\t\t\t\t\tthis.text = '正在安装，请稍后';\r\n\t\t\t\t\t\t\t\t\t\tplus.runtime.install(\r\n\t\t\t\t\t\t\t\t\t\t\tpath,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t//\t\t\t\t\tforce: true\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.text = '安装完成';\r\n\t\t\t\t\t\t\t\t\t\t\t\tplus.storage.setItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'current_version',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfig.version\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\tentry.remove(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '资源升级完成',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplus.runtime.restart();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('安装包删除失败');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\te => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tentry.remove(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('安装包删除成功');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('安装包删除失败');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '安装失败了',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timage: '/static/img/wain.png'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.text = '安装失败了，重启试试？';\r\n\t\t\t\t\t\t\t\t\t\t\t\tclearInterval(stop);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.upgrade = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tentry.remove(\r\n\t\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('安装包删除成功');\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('安装包删除失败');\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: '资源下载异常',\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.upgrade = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.text = '正在检测更新，请稍后';\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.detectUpgrade();\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplus.runtime.quit();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tcontent: '读取升级包失败，请重试',\r\n\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\tplus.runtime.quit();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//下载失败\r\n\t\t\t\t\t\tif (this.downPath.length != 0) {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '升级包下载失败，是否重试？',\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tthis.Appupdate(this.configData);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tplus.runtime.quit();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '升级包下载失败，请退出重试',\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tplus.runtime.quit();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tdtask.addEventListener('statechanged', (task, status) => {\r\n\t\t\t\tswitch (task.state) {\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tlet Size = (task.downloadedSize / task.totalSize) * 100;\r\n\t\t\t\t\t\tthis.upgrade=parseInt(Size)\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdtask.start();\r\n\t\t}\r\n\t}\r\n};\r\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", [\n    _c(\"div\", { staticClass: \"mui-content\" }, [\n      _c(\"div\", { staticClass: \"logo\" }),\n      _c(\n        \"div\",\n        { attrs: { id: \"bottom_progressbar\" } },\n        [\n          _c(\"p\", { staticClass: \"progressbar_text\" }, [\n            _vm._v(_vm._s(_vm.text))\n          ]),\n          _c(\n            \"view\",\n            { staticClass: \"progress-box\" },\n            [\n              _c(\"progress\", {\n                staticClass: \"progress\",\n                attrs: {\n                  percent: _vm.upgrade,\n                  activeColor: \"red\",\n                  active: \"\",\n                  \"stroke-width\": \"8\"\n                }\n              })\n            ],\n            1\n          )\n        ],\n        1\n      )\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}